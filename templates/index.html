<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∞–∂–µ—Ä –ø—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏—è —Å–ª–æ–≤</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö –¢—Ä–µ–Ω–∞–∂–µ—Ä –ø—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏—è —Å–ª–æ–≤</h1>
            <p>–£–ª—É—á—à–∞–π—Ç–µ —Å–≤–æ—é –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å –∏–≥—Ä–∞—é—á–∏!</p>
        </div>

        <div class="content">
            <!-- –°–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="setup-section" class="section active">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>

                <!-- –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ -->
                <div class="mode-selector">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏:</h3>
                    <div class="mode-option selected" onclick="selectMode('ru_only', this)">
                        <input type="radio" name="mode" value="ru_only" id="mode-ru-only" checked>
                        <label for="mode-ru-only">üìù –¢–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–µ —Å–ª–æ–≤–∞ (—Å–ª—ã—à—É —Ä—É—Å—Å–∫–æ–µ, –ø–∏—à—É —Ä—É—Å—Å–∫–æ–µ)</label>
                    </div>
                    <div class="mode-option" onclick="selectMode('ru_to_en', this)">
                        <input type="radio" name="mode" value="ru_to_en" id="mode-ru-to-en">
                        <label for="mode-ru-to-en">üá∑üá∫‚Üíüá¨üáß –†—É—Å—Å–∫–∏–π ‚Üí –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (—Å–ª—ã—à—É —Ä—É—Å—Å–∫–æ–µ, –ø–∏—à—É –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ)</label>
                    </div>
                    <div class="mode-option" onclick="selectMode('en_to_ru', this)">
                        <input type="radio" name="mode" value="en_to_ru" id="mode-en-to-ru">
                        <label for="mode-en-to-ru">üá¨üáß‚Üíüá∑üá∫ –ê–Ω–≥–ª–∏–π—Å–∫–∏–π ‚Üí –†—É—Å—Å–∫–∏–π (—Å–ª—ã—à—É –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ, –ø–∏—à—É —Ä—É—Å—Å–∫–æ–µ)</label>
                    </div>
                </div>

                <!-- –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–ª–æ–≤ -->
                <div class="source-selector">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–ª–æ–≤:</h3>
                    <div class="button-group">
                        <button class="btn btn-primary" id="db-source-btn" onclick="selectSource('database')">
                            üìö –ò–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
                        </button>
                        <button class="btn btn-secondary" id="manual-source-btn" onclick="selectSource('manual')">
                            ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é
                        </button>
                    </div>
                </div>

                <!-- –í—ã–±–æ—Ä –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö -->
                <div id="database-selection" class="database-selection" style="display:none;">
                    <div class="filter-section">
                        <h3 id="categories-title">üéØ –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:</h3>
                        <div id="categories-container" class="options-grid"></div>
                    </div>

                    <div class="filter-section" id="letters-section" style="display:none;">
                        <h3>üî§ –í—ã–±–µ—Ä–∏—Ç–µ –±—É–∫–≤—ã (–¥–ª—è —Å–ª–æ–≤–∞—Ä–Ω—ã—Ö —Å–ª–æ–≤):</h3>
                        <div class="letter-selection-controls">
                            <button class="btn btn-info btn-sm" onclick="selectAllLetters()">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
                            <button class="btn btn-secondary btn-sm" onclick="deselectAllLetters()">–°–Ω—è—Ç—å –≤—ã–±–æ—Ä</button>
                        </div>
                        <div id="letters-container" class="letters-grid"></div>
                    </div>

                    <div class="selected-info" id="selected-info">
                        <p>üìä –í—ã–±—Ä–∞–Ω–æ —Å–ª–æ–≤: <strong id="selected-count">0</strong></p>
                    </div>
                </div>

                <!-- –†—É—á–Ω–æ–π –≤–≤–æ–¥ -->
                <div id="manual-input" class="manual-input">
                    <div class="instruction" id="instruction-text">
                        <strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong> –í–≤–µ–¥–∏—Ç–µ —Ä—É—Å—Å–∫–∏–µ —Å–ª–æ–≤–∞ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É).
                        –°–∏—Å—Ç–µ–º–∞ –æ–∑–≤—É—á–∏—Ç –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ, –∞ –≤—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –µ–≥–æ.
                    </div>
                    <textarea id="words-textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–∞ –∑–¥–µ—Å—å...">–≤–æ–∫–∑–∞–ª
–ø–∞—Ä–∞—à—é—Ç
–∞–∫–∫–æ–º–ø–∞–Ω–µ–º–µ–Ω—Ç
–±—é–ª–ª–µ—Ç–µ–Ω—å
–¥–µ—Ä–µ–≤–Ω—è
–∏–Ω—Ç–µ–ª–ª–∏–≥–µ–Ω—Ç
–ø—Ä–æ—Ñ–µ—Å—Å–∏—è
–∫–æ–ª–ª–µ–∫—Ç–∏–≤
—Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è
–¥–∏—Å–∫—É—Å—Å–∏—è</textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="startTraining()">‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>
                </div>

                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤...</p>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ -->
            <div id="training-section" class="section">
                <button class="btn btn-secondary" onclick="backToSetup()">‚Üê –ù–∞–∑–∞–¥ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º</button>

                <div class="training-area">
                    <div class="progress-info" id="progress-info">–°–ª–æ–≤–æ 1 –∏–∑ 10</div>
                    <div class="word-display" id="word-display">???</div>
                    <div id="mode-hint" class="mode-hint">–ü—Ä–æ—Å–ª—É—à–∞–π—Ç–µ —Å–ª–æ–≤–æ –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –µ–≥–æ</div>
                    <input type="text" id="answer-input" class="answer-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ..." onkeypress="handleEnter(event)">
                    <div class="result-message" id="result-message"></div>

                    <div class="button-group">
                        <button class="btn btn-info" onclick="speakWord()">üîä –ü—Ä–æ—Å–ª—É—à–∞—Ç—å —Å–ª–æ–≤–æ</button>
                        <button class="btn btn-primary" id="next-btn" onclick="checkAnswer()">‚û°Ô∏è –°–ª–µ–¥—É—é—â–µ–µ —Å–ª–æ–≤–æ</button>
                    </div>

                    <div class="stats-box">
                        <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏</h3>
                        <div id="stats-display">
                            <p>–í—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫: <strong id="total-attempts">0</strong></p>
                            <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <strong id="correct-answers">0</strong> (<span id="percentage">0</span>%)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
            <div id="results-section" class="section">
                <div class="results-container">
                    <h2>üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
                    <div class="grade-display" id="grade-display">5</div>
                    <div id="results-stats"></div>

                    <div class="results-grid">
                        <div class="results-column">
                            <h3>‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞</h3>
                            <div id="incorrect-words"></div>
                        </div>
                        <div class="results-column">
                            <h3>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞</h3>
                            <div id="correct-words"></div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-primary" onclick="retryTraining()">üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>
                        <button class="btn btn-success" onclick="backToSetup()">‚úì –ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <audio id="audio-player" style="display: none;"></audio>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript —Ñ–∞–π–ª–æ–≤ -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/training.js') }}"></script>
</body>
</html>